<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å½¹æº€ã‚¯ãƒ©ã‚¦ãƒ‰ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@700&family=Noto+Sans+JP:wght@400;500&display=swap" rel="stylesheet">
    <style>
        body { background-color: #0a0a0a; color: #e0e0e0; font-family: 'Noto Sans JP', sans-serif; }
        .font-serif { font-family: 'Noto Serif JP', serif; }
        .gold-text { color: #d4af37; }
        .card { background: #161616; border: 1px solid rgba(255,255,255,0.05); transition: 0.3s; }
        .card:hover { border-color: #d4af37; transform: translateY(-4px); }
        .bg-pattern { background-image: radial-gradient(circle at 2px 2px, rgba(212, 175, 55, 0.05) 1px, transparent 0); background-size: 30px 30px; }
        
        /* ã‚»ãƒ¬ã‚¯ãƒˆãƒœãƒƒã‚¯ã‚¹ã®è£…é£¾ï¼ˆiOS/iPadå¯¾å¿œï¼‰ */
        select { 
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%23d4af37'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'/%3E%3C/svg%3E"); 
            background-position: right 0.5rem center; 
            background-repeat: no-repeat; 
            background-size: 1.5em 1.5em; 
            padding-right: 2.5rem; 
            -webkit-appearance: none; 
            appearance: none; 
        }
    </style>
</head>
<body class="bg-pattern min-h-screen">

    <header class="py-12 text-center border-b border-white/5 bg-black/50 backdrop-blur-md sticky top-0 z-50">
        <h1 class="text-3xl md:text-5xl font-serif gold-text tracking-widest uppercase">Yakuman Archive</h1>
        <div class="mt-6 flex justify-center gap-4">
            <a href="https://docs.google.com/forms/d/e/1FAIpQLSc5auDIaxps9lD7oU9juwPKwk1gyWOVz7Icgi-px_2Rqq9DTw/viewform" target="_blank" class="bg-yellow-600 text-black px-8 py-3 rounded-full font-bold hover:bg-yellow-500 transition-all shadow-lg shadow-yellow-900/20">
                ï¼‹ å½¹æº€ã‚’æŠ•ç¨¿ã™ã‚‹
            </a>
            <a href="calendar.html" class="bg-zinc-900 text-yellow-500 border border-yellow-500/30 px-6 md:px-8 py-3 rounded-full font-bold hover:bg-zinc-800 transition-all text-sm md:text-base flex items-center">
                <span class="mr-2">ğŸ“…</span> ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼
            </a>
        </div>
    </header>

    <main class="container mx-auto px-4 py-12">
        <div class="mb-12 flex flex-wrap justify-center gap-6">
            <div class="flex flex-col items-center gap-2">
                <label class="text-[10px] text-zinc-500 tracking-widest uppercase">Filter by Yakuman</label>
                <select id="filter-yakuman" onchange="renderGallery()" class="w-48 bg-zinc-900 border border-zinc-700 text-yellow-500 px-4 py-2 rounded-lg outline-none cursor-pointer hover:border-yellow-600 transition-all text-xs">
                    <option value="all">ã™ã¹ã¦ã®å½¹æº€</option>
                  <optgroup label="é€šå¸¸å½¹æº€" class="bg-black text-gray-400">
                    <option value="å›½å£«ç„¡åŒ">å›½å£«ç„¡åŒ</option>
                    <option value="å››æš—åˆ»">å››æš—åˆ»</option>
                    <option value="å¤§ä¸‰å…ƒ">å¤§ä¸‰å…ƒ</option>
                    <option value="å­—ä¸€è‰²">å­—ä¸€è‰²</option>
                    <option value="å°å››å–œ">å°å››å–œ</option>
                    <option value="ç·‘ä¸€è‰²">ç·‘ä¸€è‰²</option>
                    <option value="ä¹è“®å®ç‡ˆ">ä¹è“®å®ç‡ˆ</option>
                    <option value="æ¸…è€é ­">æ¸…è€é ­</option>
                    <option value="å¤©å’Œ">å¤©å’Œ</option>
                    <option value="åœ°å’Œ">åœ°å’Œ</option>
                    <option value="å››æ§“å­">å››æ§“å­</option>
                </optgroup>
                <optgroup label="ä¸Šä½ãƒ»è¤‡åˆå½¹æº€" class="bg-black text-gray-400">
                    <option value="å››æš—åˆ»å˜é¨">å››æš—åˆ»å˜é¨</option>
                    <option value="å›½å£«ç„¡åŒåä¸‰é¢å¾…ã¡">å›½å£«ç„¡åŒåä¸‰é¢å¾…ã¡</option>
                    <option value="å¤§å››å–œ">å¤§å››å–œ</option>
                    <option value="ç´”æ­£ä¹è“®å®ç‡ˆ">ç´”æ­£ä¹è“®å®ç‡ˆ</option>
                    <option value="è¤‡åˆå½¹æº€">è¤‡åˆå½¹æº€</option>
                </optgroup>
                <optgroup label="æ•°ãˆå½¹æº€" class="bg-black text-gray-400">
                    <option value="æ•°ãˆå½¹æº€(13é£œ)">æ•°ãˆå½¹æº€(13é£œ)</option>
                    <option value="æ•°ãˆå½¹æº€(14é£œ)">æ•°ãˆå½¹æº€(14é£œ)</option>
                    <option value="æ•°ãˆå½¹æº€(15é£œ)">æ•°ãˆå½¹æº€(15é£œ)</option>
                    <option value="æ•°ãˆå½¹æº€(16é£œ)">æ•°ãˆå½¹æº€(16é£œ)</option>
                    <option value="æ•°ãˆå½¹æº€(17é£œ)">æ•°ãˆå½¹æº€(17é£œ)</option>
                    <option value="æ•°ãˆå½¹æº€(18é£œ)">æ•°ãˆå½¹æº€(18é£œ)</option>
                    <option value="æ•°ãˆå½¹æº€(19é£œ)">æ•°ãˆå½¹æº€(19é£œ)</option>
                    <option value="æ•°ãˆå½¹æº€(20é£œ)">æ•°ãˆå½¹æº€(20é£œ)</option>
                    <option value="æ•°ãˆå½¹æº€(21é£œä»¥ä¸Š)">æ•°ãˆå½¹æº€(21é£œä»¥ä¸Š)</option>
                </optgroup>
            </select>
        </div>

            <div class="flex flex-col items-center gap-2">
                <label class="text-[10px] text-zinc-500 tracking-widest uppercase">Filter by Place</label>
                <select id="filter-place" onchange="renderGallery()" class="w-48 bg-zinc-900 border border-zinc-700 text-yellow-500 px-4 py-2 rounded-lg outline-none cursor-pointer hover:border-yellow-600 transition-all text-xs">
                    <option value="all">ã™ã¹ã¦ã®å ´æ‰€</option>
                    <option value="å‹äººæˆ¦">å‹äººæˆ¦</option>
                    <option value="å¤§ä¼šæˆ¦">å¤§ä¼šæˆ¦</option>
                    <option value="éŠ…ã®é–“">éŠ…ã®é–“</option>
                    <option value="éŠ€ã®é–“">éŠ€ã®é–“</option>
                    <option value="é‡‘ã®é–“">é‡‘ã®é–“</option>
                    <option value="ç‰ã®é–“">ç‰ã®é–“</option>
                    <option value="ç‹åº§ã®é–“">ç‹åº§ã®é–“</option>
                </select>
            </div>
        </div>

        <div id="gallery" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            <div class="text-center col-span-full py-20">
                <p class="text-gray-500 animate-pulse font-serif tracking-widest">LOADING DATA...</p>
            </div>
        </div>
    </main>

    <script>
        const csvUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vT37Jv511HtrakgPHKRH1fassEFnddSsgkvA8RSiGSo4viHEuGnEyQ5a0jLE4kZQPlWD5abA1EO30Rd/pub?gid=1253971321&single=true&output=csv';
        let allData = [];

        async function init() {
            Papa.parse(csvUrl, {
                download: true,
                header: true,
                complete: function(results) {
                    allData = results.data.filter(row => row['ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—']).reverse();
                    renderGallery();
                }
            });
        }

        function renderGallery() {
            const yakumanFilter = document.getElementById('filter-yakuman').value;
            const placeFilter = document.getElementById('filter-place').value;
            const gallery = document.getElementById('gallery');
            gallery.innerHTML = '';

            const filtered = allData.filter(row => {
                const rowYakuman = row['å½¹å'] || '';
                const rowPlace = row['å’Œäº†å ´æ‰€'] || '';
                const matchYakuman = (yakumanFilter === 'all' || rowYakuman === yakumanFilter);
                const matchPlace = (placeFilter === 'all' || rowPlace === placeFilter);
                return matchYakuman && matchPlace;
            });

            if (filtered.length === 0) {
                gallery.innerHTML = '<div class="col-span-full text-center py-20 text-zinc-600 font-serif tracking-widest text-sm">è©²å½“ã™ã‚‹è¨˜éŒ²ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚</div>';
                return;
            }

            filtered.forEach(row => {
                const imgUrl = row['å’Œäº†ç”»åƒ'];
                const place = row['å’Œäº†å ´æ‰€'] || 'ä¸æ˜';
                const yakuman = row['å½¹å'] || 'å½¹æº€';
                const date = row['å’Œäº†æ—¥'] || 'ä¸æ˜';
                const desc = row['ç°¡æ˜“è§£èª¬'] || 'è§£èª¬ãªã—';

                const card = `
                    <div class="card rounded-xl overflow-hidden shadow-2xl flex flex-col border border-white/5">
                        <div class="aspect-video bg-zinc-900 relative overflow-hidden">
                            ${imgUrl ? 
                                `<img src="${imgUrl}" class="w-full h-full object-cover transition-transform duration-700 hover:scale-110" alt="yakuman">` : 
                                '<div class="flex items-center justify-center h-full text-zinc-700 italic">No Image</div>'}
                            <div class="absolute top-3 left-3">
                                <span class="bg-black/70 backdrop-blur-md text-yellow-500 text-[9px] px-3 py-1 rounded-full border border-yellow-500/20 font-bold tracking-wider">
                                    ${place}
                                </span>
                            </div>
                        </div>
                        <div class="p-6 flex-grow flex flex-col bg-gradient-to-b from-transparent to-black/20">
                            <div class="flex justify-between items-baseline mb-4">
                                <h2 class="text-xl font-serif gold-text leading-tight">${yakuman}</h2>
                                <span class="text-[10px] text-zinc-500 font-mono tracking-tighter shrink-0 ml-2">${date}</span>
                            </div>
                            <div class="mt-auto">
                                <p class="text-xs text-zinc-400 leading-relaxed border-l border-zinc-800 pl-4 py-1 h-12 line-clamp-2 italic">
                                    ${desc}
                                </p>
                            </div>
                        </div>
                    </div>
                `;
                gallery.insertAdjacentHTML('beforeend', card);
            });
        }

        init();
        setInterval(init, 60000);
    </script>
</body>
</html>
